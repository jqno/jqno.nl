{% if page.blog == "concerts" %}
  {% set current_blog = concerts %}
{% else %}
  {% set current_blog = post %}
{% endif %}

{% macro cloud(type, collection, lower_threshold, upper_threshold) %}
  <div style="text-align: justify">
  {% for tag in collection %}
    {% set c = tag.post_count %}
    {% if c < lower_threshold %}
      {% set element = "70%" %}
    {% elseif c < upper_threshold %}
      {% set element = "100%" %}
    {% else %}
      {% set element = "130%" %}
    {% endif %}
    {% if type == "tag" %}
      {% set url = pctagurl(tag.name) %}
    {% elseif type == "cat" %}
      {% set url = pccaturl(tag.name) %}
    {% endif %}
    <span style="font-size: {{ element }}"><a href="{{ url }}">{{ tag }}</a>&nbsp;({{ c }})</span>
  {% endfor %}
  </div>
{% endmacro %}

{% import _self as s %}
<section>
  <h1>Tags</h1>
  {{ s.cloud("tag", current_blog.tags, current_blog.tagcloud_lower, current_blog.tagcloud_upper) }}
</section>
<section>
  {{ s.cloud("cat", current_blog.categories, current_blog.catcloud_lower, current_blog.catcloud_upper) }}
</section>
